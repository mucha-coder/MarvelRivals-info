---
import { type Lang, useTranslations, getLocalizedPath } from '../i18n/ui';
import LanguagePicker from './LanguagePicker.astro';

interface Props {
  lang: Lang;
}

const { lang } = Astro.props;
const t = useTranslations(lang);
const { pathname } = Astro.url;

const navItems = [
  { href: lang === 'ja' ? '/' : '/en', label: t('nav.home') },
  { href: lang === 'ja' ? '/category/patch-notes' : '/en/category/patch-notes', label: t('nav.patchNotes') },
  { href: lang === 'ja' ? '/category/hero-balance' : '/en/category/hero-balance', label: t('nav.heroBalance') },
];
---

<header class="sticky top-0 z-50 bg-[#0d0d0d]/95 backdrop-blur-md border-b border-white/10">
  <div class="mx-auto max-w-7xl px-4 sm:px-6 lg:px-8">
    <div class="flex h-16 items-center justify-between">
      <!-- Logo -->
      <a href={lang === 'ja' ? '/' : '/en'} class="flex items-center group">
        <img 
          src="/images/logo.png" 
          alt="Marvel Rivals" 
          class="h-8 sm:h-10 w-auto opacity-90 group-hover:opacity-100 transition-opacity"
        />
      </a>

      <!-- Navigation -->
      <nav class="hidden md:flex items-center gap-1">
        {navItems.map((item) => (
          <a
            href={item.href}
            class:list={[
              'px-4 py-2 rounded-lg text-sm font-medium transition-colors',
              pathname === item.href || (item.href !== '/' && item.href !== '/en' && pathname.startsWith(item.href))
                ? 'text-yellow-400'
                : 'text-gray-300 hover:text-white hover:bg-white/5',
            ]}
          >
            {item.label}
          </a>
        ))}
      </nav>

      <!-- Right Side -->
      <div class="flex items-center gap-4">
        <LanguagePicker lang={lang} />
      </div>
    </div>
  </div>

  <!-- Mobile Navigation -->
  <nav class="md:hidden border-t border-white/5 px-4 py-2">
    <div class="flex flex-wrap gap-2">
      {navItems.map((item) => (
        <a
          href={item.href}
          class:list={[
            'px-3 py-1.5 rounded-lg text-xs font-medium transition-colors',
            pathname === item.href
              ? 'text-yellow-400 bg-yellow-400/10'
              : 'text-gray-400 hover:text-white hover:bg-white/5',
          ]}
        >
          {item.label}
        </a>
      ))}
    </div>
  </nav>
</header>
