---
import { type Lang, useTranslations, getLocalizedPath } from '../i18n/ui';
import LanguagePicker from './LanguagePicker.astro';

interface Props {
  lang: Lang;
}

const { lang } = Astro.props;
const t = useTranslations(lang);
const { pathname } = Astro.url;

const navItems = [
  { href: lang === 'ja' ? '/' : '/en', label: t('nav.home') },
  { href: lang === 'ja' ? '/category/patch-notes' : '/en/category/patch-notes', label: t('nav.patchNotes') },
  { href: lang === 'ja' ? '/category/hero-balance' : '/en/category/hero-balance', label: t('nav.heroBalance') },
];
---

<header class="sticky top-0 z-50 border-b border-gray-200 bg-white/95 backdrop-blur-sm">
  <div class="mx-auto max-w-4xl px-4 sm:px-6">
    <div class="flex h-14 items-center justify-between">
      <!-- Logo -->
      <a href={lang === 'ja' ? '/' : '/en'} class="flex items-center gap-2 font-bold text-gray-900 hover:text-blue-600 transition-colors">
        <span class="text-lg">Marvel Rivals Info</span>
      </a>

      <!-- Navigation -->
      <nav class="hidden sm:flex items-center gap-6">
        {navItems.map((item) => (
          <a
            href={item.href}
            class:list={[
              'text-sm font-medium transition-colors',
              pathname === item.href || (item.href !== '/' && item.href !== '/en' && pathname.startsWith(item.href))
                ? 'text-blue-600'
                : 'text-gray-600 hover:text-gray-900',
            ]}
          >
            {item.label}
          </a>
        ))}
      </nav>

      <!-- Language Picker -->
      <LanguagePicker lang={lang} />
    </div>
  </div>

  <!-- Mobile Navigation -->
  <nav class="sm:hidden border-t border-gray-100 px-4 py-2">
    <div class="flex flex-wrap gap-4">
      {navItems.map((item) => (
        <a
          href={item.href}
          class:list={[
            'text-sm font-medium transition-colors',
            pathname === item.href
              ? 'text-blue-600'
              : 'text-gray-500 hover:text-gray-900',
          ]}
        >
          {item.label}
        </a>
      ))}
    </div>
  </nav>
</header>
