---
import { type Lang, languages, getLocalizedPath } from '../i18n/ui';

interface Props {
  lang: Lang;
}

const { lang } = Astro.props;
const { pathname } = Astro.url;

const languageData = [
  { code: 'ja' as const, label: 'æ—¥æœ¬èªž', flag: 'ðŸ‡¯ðŸ‡µ' },
  { code: 'en' as const, label: 'EN', flag: 'ðŸ‡ºðŸ‡¸' },
];
---

<nav class="language-picker" aria-label="è¨€èªžé¸æŠž">
  <div class="flex items-center gap-1 rounded-lg bg-white/5 p-1">
    {languageData.map(({ code, label, flag }) => (
      <a
        href={getLocalizedPath(pathname, code)}
        class:list={[
          'flex items-center gap-1.5 px-3 py-1.5 rounded-md text-sm font-medium transition-all',
          lang === code
            ? 'bg-marvel-purple text-white shadow-lg shadow-marvel-purple/30'
            : 'text-gray-400 hover:text-white hover:bg-white/10',
        ]}
        aria-current={lang === code ? 'page' : undefined}
      >
        <span aria-hidden="true">{flag}</span>
        <span class="hidden sm:inline">{label}</span>
      </a>
    ))}
  </div>
</nav>

<style>
  .language-picker a {
    text-decoration: none;
  }
</style>
