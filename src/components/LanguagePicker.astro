---
import { type Lang, languages, getLocalizedPath } from '../i18n/ui';

interface Props {
  lang: Lang;
}

const { lang } = Astro.props;
const { pathname } = Astro.url;

const languageData = [
  { code: 'ja' as const, label: 'JP' },
  { code: 'en' as const, label: 'EN' },
];
---

<nav class="flex items-center gap-1 text-sm" aria-label="言語選択">
  {languageData.map(({ code, label }, index) => (
    <>
      {index > 0 && <span class="text-gray-300">|</span>}
      <a
        href={getLocalizedPath(pathname, code)}
        class:list={[
          'px-1 transition-colors',
          lang === code
            ? 'text-blue-600 font-medium'
            : 'text-gray-400 hover:text-gray-600',
        ]}
        aria-current={lang === code ? 'page' : undefined}
      >
        {label}
      </a>
    </>
  ))}
</nav>
